(this.webpackJsonpbj=this.webpackJsonpbj||[]).push([[0],{30:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(6),c=t.n(a),s=t(21),i=t.n(s),r=(t(30),t(17)),l=t(25),o=t(0);function d(e){var n=e.handValue,t=e.enemyHandValue,a=e.cards,c=e.mirror,s=e.gameStatus,i=n>21?"hand-losing":t>21||n>t?"hand-winning":n<t?"hand-losing":"";return Object(o.jsxs)("div",{className:"hand "+(c?"hand-mirror":""),children:[Object(o.jsxs)("div",{className:"hand-value "+i,children:[n,("FINISHED"===s||"GAME_OVER"===s)&&"hand-winning"===i&&Object(o.jsx)("span",{className:"result-icon "+("GAME_OVER"===s?"result-icon-big":""),children:"\ud83c\udfc6"})]}),Object(o.jsx)("div",{className:"cards",children:a.map((function(e,n){return Object(o.jsxs)("div",{className:"card card-"+e.suit.symbol,children:[Object(o.jsxs)("div",{className:"card-face",children:[Object(o.jsxs)("div",{className:"card-face-top",children:[Object(o.jsx)("div",{children:e.rank.symbol}),Object(o.jsx)("div",{className:"emoji",children:e.suit.symbol})]}),Object(o.jsxs)("div",{className:"card-face-bottom",children:[Object(o.jsx)("div",{children:e.rank.symbol}),Object(o.jsx)("div",{className:"emoji",children:e.suit.symbol})]}),Object(o.jsx)("div",{className:"card-face-inner",children:new Array(e.rank.value).fill().map((function(n,t){return Object(o.jsx)("div",{className:"emoji",children:e.suit.symbol},t)}))})]}),Object(o.jsx)("div",{className:"card-back",children:Object(o.jsx)("div",{className:"card-back-inner"})})]},n)}))})]})}function u(e){var n=e.data,t=e.onClose;return Object(o.jsx)("div",{className:"dialog-container",onClick:t,children:Object(o.jsxs)("div",{className:"dialog",children:[Object(o.jsx)("div",{className:"dialog-title",children:"Leaderboard"}),Object(o.jsx)("div",{className:"dialog-content",children:null===n||void 0===n?void 0:n.map((function(e,n){return Object(o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(o.jsx)("div",{style:{marginRight:20},children:e.name}),Object(o.jsx)("div",{children:e.rating})]},n)}))})]})})}function j(e){var n=e.wins,t=e.roundsToWin;return Object(o.jsx)("div",{className:"round-wins",children:new Array(t).fill().map((function(e,t){return Object(o.jsx)("div",{className:"round "+(n>t?"round-won":"")},t)}))})}for(var b=[],m=[{id:"HEART",symbol:"\u2665"},{id:"DIAMOND",symbol:"\u2666"},{id:"SPADE",symbol:"\u2660"},{id:"CLUB",symbol:"\u2663"}],v=[{symbol:"2",value:2},{symbol:"3",value:3},{symbol:"4",value:4},{symbol:"5",value:5},{symbol:"6",value:6},{symbol:"7",value:7},{symbol:"8",value:8},{symbol:"9",value:9},{symbol:"10",value:10},{symbol:"J",value:10},{symbol:"Q",value:10},{symbol:"K",value:10},{symbol:"A",value:1}],h=0;h<52;h++)b.push({suit:m[h%4],rank:v[Math.floor(h/4)]});var O=function(e){for(var n=e.reduce((function(e,n){return e+n.rank.value}),0),t=e.filter((function(e){return"A"===e.rank.symbol})).length,a=0;a<t;a++)n<12&&(n+=10);return n},x=navigator.userAgent.match(/iphone|ipad|android|macintosh/i);function y(){var e,n,t,c,s=Object(a.useState)(),i=Object(r.a)(s,2),b=i[0],m=i[1],v=Object(a.useState)(),h=Object(r.a)(v,2),y=h[0],f=h[1],p=Object(a.useState)(!1),g=Object(r.a)(p,2),N=g[0],k=g[1],w=Object(a.useState)(),S=Object(r.a)(w,2),E=S[0],_=S[1],A=Object(a.useMemo)((function(){return(null===b||void 0===b?void 0:b.player1)&&O(b.player1.hand)}),[null===b||void 0===b?void 0:b.player1]),C=Object(a.useMemo)((function(){return(null===b||void 0===b?void 0:b.player2)&&O(b.player2.hand)}),[null===b||void 0===b?void 0:b.player2]),I=Object(a.useRef)();return Object(a.useEffect)((function(){var e=I.current=Object(l.a)("https://bj-1v1.herokuapp.com");e.on("connect",(function(n){e.emit("auth",{secret:localStorage.getItem("secret")}),e.emit("get_leaderboard");var t=window.location.search.slice(1);t?e.emit("join_game",{gameId:t}):e.emit("create_game",{})})),e.on("leaderboard_data",(function(e){_(e)})),e.on("user_data",(function(e){f(e),localStorage.setItem("secret",e.secret)})),e.on("join",(function(e){m(e),window.history.replaceState(null,null,"./?"+e.gameId)})),e.on("player_join",(function(e){m(e)})),e.on("terminated",(function(e){})),e.on("not_found",(function(n){window.history.replaceState(null,null,"./"),e.emit("create_game",{})})),e.on("update",(function(e){m(e)}))}),[]),b?Object(o.jsxs)("div",{className:"app "+(x?"small-emojis":""),children:[Object(o.jsxs)("div",{className:"app-inner",children:[Object(o.jsx)("button",{className:"icon-button leaderboard-button",onClick:function(){I.current.emit("get_leaderboard"),k(!0)},children:"\ud83e\udd47"}),Object(o.jsx)("div",{className:"player-portrait",children:b.player2?Object(o.jsxs)("span",{children:[b.player2.name," (",b.player2.rating,")"]}):Object(o.jsx)("span",{children:"\xa0"})}),Object(o.jsx)(j,{wins:(null===(e=b.player2)||void 0===e?void 0:e.score)||0,roundsToWin:b.roundsToWin}),Object(o.jsx)(d,{cards:(null===(n=b.player2)||void 0===n?void 0:n.hand)||[],handValue:C,enemyHandValue:A,mirror:!0,gameStatus:b.status}),Object(o.jsxs)("div",{className:"divider",children:[Object(o.jsx)("div",{}),Object(o.jsx)("div",{style:{flex:1}}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"card",children:Object(o.jsx)("div",{className:"card-back no-anim",children:Object(o.jsx)("div",{className:"card-back-inner"})})}),Object(o.jsx)("div",{children:b.deckSize-b.deckIndex})]})]}),Object(o.jsx)(d,{cards:(null===(t=b.player1)||void 0===t?void 0:t.hand)||[],handValue:A,enemyHandValue:C,gameStatus:b.status}),Object(o.jsx)(j,{wins:(null===(c=b.player1)||void 0===c?void 0:c.score)||0,roundsToWin:b.roundsToWin}),Object(o.jsxs)("div",{className:"player-portrait",children:[Object(o.jsxs)("div",{children:[null===y||void 0===y?void 0:y.name," (",null===y||void 0===y?void 0:y.rating,")"]}),Object(o.jsxs)("div",{className:"actions",children:["PLAYER1_TURN"===b.status&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{className:"action-button hit",onClick:function(){I.current.emit("hit")},children:"HIT"}),Object(o.jsx)("button",{className:"action-button stay",onClick:function(){I.current.emit("stay")},children:"STAY"})]}),"FINISHED"===b.status&&Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("button",{className:"action-button",onClick:function(){I.current.emit("next_round")},children:"NEXT ROUND"})}),"GAME_OVER"===b.status&&Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("button",{className:"action-button",onClick:function(){I.current.emit("create_game")},children:"NEW GAME"})})]})]})]}),N&&Object(o.jsx)(u,{data:E,onClose:function(){return k(!1)}})]}):null}var f=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,38)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,s=n.getLCP,i=n.getTTFB;t(e),a(e),c(e),s(e),i(e)}))};document.body.style.background="center / cover no-repeat url(./bg.jpg)",i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(y,{})}),document.getElementById("root")),f()}},[[37,1,2]]]);
//# sourceMappingURL=main.7eec2161.chunk.js.map